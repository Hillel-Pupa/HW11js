import{userListOnClick,showUsers,showForm,addUsers,newUserBtn,addUserBtn,addNewUser,editUserBtn,editUser}from"./function.js";import{getUsers}from"./users.js";import{userList}from"./function.js";import{userTemplate}from"./function.js";newUserBtn.addEventListener("click",showForm),addUserBtn.addEventListener("click",addNewUser),editUserBtn.addEventListener("click",editUser);const users=getUsers();showUsers(),userList.addEventListener("click",userListOnClick);
"use strict";import{getUsers}from"./users.js";const userList=document.querySelector(".user-list"),userInfo=document.querySelector(".user-info"),userTemplate=document.querySelector("#user-content"),namePattern=/^[A-Z][a-z]+$|^[А-Я][а-я]+$/,agePattern=/^\d\d$/,emailPattern=/^[a-zA-Z0-9].+@[a-z]{3,}.[a-z]{2,}$/,numberPattern=/^.[0-9]+$/,cardNumberPattern=/^[0-9]{16}$/,addUserTemplate=document.querySelector("#add-user"),addUsers=document.querySelector(".add-user"),newUserBtn=document.querySelector(".new-user");function User(e,t,r,s,n,a,o){this.id=(1e17*Math.random()).toString(16),this.firstname=e,this.lastname=t,this.age=r,this.email=s,this.phonenumber=n,this.cardnumber=a,this.password=o}function addNewUser(e){e.preventDefault();const t=document.querySelector(".main-form");var r=new FormData(t),e=Object.fromEntries(r);console.log(e);r=new User(e.firstname,e.lastname,e.age,e.email,e.phonenumber,e.cardnumber,e.userpassword);if(namePattern.test(e.firstname))if(namePattern.test(e.lastname))if(agePattern.test(e.age))if(emailPattern.test(e.email))if(numberPattern.test(e.phonenumber))if(cardNumberPattern.test(e.cardnumber)){console.log(r);const s=getUsers();s.push(r),saveUsers(s),addUsers.hidden=!0,showUsers(),t.reset()}else console.error("Enter card number");else console.error("Enter phone number");else console.error("Enter email");else console.error("Enter age");else console.error("Enter lastname");else console.error("Enter firstname")}function saveUsers(e){localStorage.setItem("users",JSON.stringify(e))}function showUsers(){var t=getUsers();userList.replaceChildren([]);for(let e=0;e<t.length;e++){const s=userTemplate.content.cloneNode(!0),n=s.querySelector(".user");var r=t[e];n.id=r.id;const a=s.querySelector(".name"),o=s.querySelector(".lastname");a.textContent=r.firstname,o.textContent=r.lastname;const d=s.querySelector(".user-view"),i=s.querySelector(".age"),l=s.querySelector(".email"),c=s.querySelector(".phone-number"),m=s.querySelector(".card-number"),u=s.querySelector(".password");n.appendChild(a),n.appendChild(o),userList.appendChild(n),d.appendChild(i),d.appendChild(l),d.appendChild(c),d.appendChild(m),d.appendChild(u),n.appendChild(d),i.textContent="age: "+r.age,l.textContent="email: "+r.email,c.textContent="Phone Number: "+r.number,m.textContent="Card Number: "+r.cardnumber,u.textContent="Password: "+r.password,userList.appendChild(s)}localStorage.setItem("users",JSON.stringify(t))}const newAddUserTemplate=addUserTemplate.content.cloneNode(!0);function fillUserForm(e,t){for(const r in e)t.elements[r]?t.elements[r].value=e[r]:console.warn("element not found",r)}function userListOnClick(e){if(e.target.classList.contains("delete")&&confirm("Вы уверенны что хотите удалить?")){const r=e.target.parentElement;r.remove();const s=getUsers();var t=s.filter(e=>e.id!=r.id);localStorage.setItem("users",JSON.stringify(t))}if(e.target.classList.contains("view")&&(e.target.parentElement.lastChild.hidden=!1),e.target.classList.contains("edit")){addUsers.hidden=!1;const n=getUsers(),a=e.target.parentElement;e=n.find(e=>e.id===a.id);const o=document.querySelector(".main-form");o.firstname.value=e.firstname,fillUserForm(e,o)}}function showForm(){addUsers.hidden=!1}addUsers.appendChild(newAddUserTemplate);const addUserBtn=document.querySelector(".post"),editUserBtn=document.querySelector(".editUser");function editUser(e){e.preventDefault();const t=getUsers(),r=document.querySelector(".main-form");var s=t.find(e=>e.id===r.elements.id.value),e=new FormData(r),e=Object.fromEntries(e);Object.assign(s,e),saveUsers(t),addUsers.hidden=!0,showUsers()}export{userList,userInfo,userTemplate,addUsers,newUserBtn,User,addNewUser,showUsers,userListOnClick,showForm,addUserBtn,editUserBtn,editUser};
import{User}from"./function.js";function getUsers(){var e;return null===localStorage.getItem("users")&&(e=[new User("Тимур","Пупкин","23","pupkin.asd@gmail.com","+38065127127","2222323455436512","ahgigGKG252!!"),new User("Маша","Лисичкина","20","masha.365@mail.ru","+382682367686","3333878656439987","AJHj65!!ak"),new User("Андрей","Пупкин","26","asoiai.aj.56@gmail.com","+217797479837","4444564376778233","ash$$f1.I67"),new User("Олег","Рыбник","34","asjs66@gmail.com","+380880465732","3343767655554512","adu@@4j!.d"),new User("Алина","Александрова","21","asuhdiu#a.@mail.ru","+380611623542","2443454478997655","sdj%FF!aAF")],localStorage.setItem("users",JSON.stringify(e))),JSON.parse(localStorage.getItem("users"))}export{getUsers};